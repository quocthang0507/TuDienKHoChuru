function startUserMedia(n){var t=audio_context.createMediaStreamSource(n);console.log("Media stream created.");recorder=new Recorder(t);console.log("Recorder initialized.")}function startRecording(n){recorder&&recorder.record();n.style.display="none";n.nextElementSibling.style.display="initial";console.log("Recording...")}function stopRecording(n,t){recorder&&recorder.stop();n.style.display="none";n.previousElementSibling.style.display="initial";$(n).next().children().first().get(0).style.display="initial";recorder&&recorder.exportWAV(n=>{validateAudio(n,t)});console.log("Stopped recording.");recorder.clear()}function validateAudio(n,t){switch(n.type){case"audio/wav":case"audio/mpeg":case"audio/ogg":break;default:alert("Không hỗ trợ các định dạng tập tin âm thanh khác, vui lòng chỉ chọn các tập tin có phần mở rộng là: *.mp3, *.wav, *.ogg");return}var i=URL.createObjectURL(n),r=document.getElementById("audioPreview"+t),u=document.getElementById("audioSource"+t);u.src=i;r.load()}function eventChangeDictType(){return function(){var n=$("#selectDictType").val();window.location.href=window.location.origin+`/api/GoToExamplePage/${n}/1`}}function deleteAudio(n){confirm("Bạn có muốn loại bỏ âm thanh này khỏi ví dụ không?")&&(loaderOn(),$.ajax({method:"GET",url:window.location.origin+"/api/DeleteAudioExample/"+n,success:function(){location.reload()},error:function(){loaderOff();showSnackbar("Lỗi: Đã xảy ra lỗi khi nhận yêu cầu xoá âm thanh phát âm ví dụ này")}}))}function uploadAudio(n){var i=document.getElementById("audioSource"+n),t=i.src;t&&(loaderOn(),fetch(t).then(n=>n.blob()).then(t=>{var i=new FormData;i.append("exampleID",n);i.append("audio",t);$.ajax({method:"POST",url:window.location.origin+"/api/UpdateAudioExample",cache:!1,contentType:!1,processData:!1,data:i,success:function(){location.reload()},error:function(){loaderOff();showSnackbar("Lỗi: Đã xảy ra lỗi khi nhận yêu cầu cập nhật âm thanh phát âm ví dụ này")}})}))}var audio_context,recorder;$(document).ready(function(){$("#selectDictType").change(eventChangeDictType());$("#inputPageNumber").change(function(){var n=$(this).value,t=$("#selectDictType").get(0).value;n&&t&&(window.location.href=window.location.origin+`/api/GoToExamplePage/${t}/${n}`)});try{window.AudioContext=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia;window.URL=window.URL||window.webkitURL;audio_context=new AudioContext;console.log("AudioContext set up.");console.log("Navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(n){alert("Trình duyệt này không hỗ trợ web audio!")}navigator.getUserMedia({audio:!0},startUserMedia,function(n){console.log("No live audio input: "+n);alert("Vui lòng cho chép trang web này sử dụng microphone của bạn, sau đó tải lại trang để cập nhật trạng thái.")})});