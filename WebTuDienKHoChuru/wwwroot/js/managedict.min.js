function showLog(n,t){console.log(n+" "+(t||""))}function startUserMedia(n){var t=audio_context.createMediaStreamSource(n);showLog("Media stream created.");recorder=new Recorder(t);showLog("Recorder initialized.")}function startRecording(n){recorder&&recorder.record();n.disabled=!0;n.nextElementSibling.disabled=!1;showLog("Recording...",null)}function stopRecording(n){recorder&&recorder.stop();n.disabled=!0;n.previousElementSibling.disabled=!1;recorder&&recorder.exportWAV(n=>{handleRecorder(n)});showLog("Stopped recording.",null);recorder.clear()}function handleRecorder(n){switch(n.type){case"audio/wav":case"audio/mpeg":case"audio/ogg":break;default:alert("Không hỗ trợ các định dạng tập tin âm thanh khác, vui lòng chỉ chọn các tập tin có đuôi như sau: *.mp3, *.wav, *.ogg");return}var t=URL.createObjectURL(n),i=document.getElementById("audioPreview"),r=document.getElementById("audioSource");r.src=t;i.load()}function addInputMeaning(){var n=document.getElementById("inputMeanings"),t=n.innerHTML,i=n.childElementCount+1;t+=`<input type="text" class="form-control" id="inputMeaning${i}" placeholder="Nhập nghĩa tại đây" >`;n.innerHTML=t}function removeInputMeaning(){var n=document.getElementById("inputMeanings");n.childElementCount>=2?n.removeChild(n.lastChild):alert("Một từ phải có ít nhất một nghĩa")}function validateImage(){var n=document.querySelector("[type=file]"),t=n.value;if(n.files.length==0)alert("Hình ảnh không được để trống!");else if(/(\.jpg|\.png)$/i.exec(t)){if(n.files&&n.files[0]){const t=n.files[0].size,i=Math.round(t/1024);return i>2048?(alert("Kích thước tập tin quá lớn, vui lòng gửi tập tin nhỏ hơn 2MB."),!1):n.files[0]}}else alert("Chỉ chấp nhận hình JPG và PNG!"),n.value="";return!1}var audio_context,recorder;$(document).ready(function(){$("#selectDictType").change(function(){var n=$("#selectDictType").val();window.location="/ManageDictionary?dictTypeID="+n});var n=$(".pagination li.prev"),t=$(".pagination li.next");t.click(function(){$("li.active").removeClass("active").next().addClass("active")});n.click(function(){$("li.active").removeClass("active").prev().addClass("active")});$("#inputImage").on("change",function(){var t=validateImage(),n;t!==!1&&(n=new FileReader,n.onload=function(n){document.getElementById("divImagePreview").innerHTML='<img class="imgPreview" class="full-width" src="'+n.target.result+'"/>'},n.readAsDataURL(t))});try{window.AudioContext=window.AudioContext||window.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia;window.URL=window.URL||window.webkitURL;audio_context=new AudioContext;showLog("AudioContext set up.");showLog("navigator.getUserMedia "+(navigator.getUserMedia?"available.":"not present!"))}catch(i){alert("Trình duyệt này không hỗ trợ web audio!")}navigator.getUserMedia({audio:!0},startUserMedia,function(n){showLog("No live audio input: "+n);alert("Vui lòng cho chép trang web này sử dụng microphone của bạn, sau đó tải lại trang để cập nhật trạng thái.")});inputAudioFile.addEventListener("change",n=>handleRecorder(n.target.files[0]))});